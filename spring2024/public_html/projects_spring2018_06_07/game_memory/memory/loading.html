<!DOCTYPE html>
<html>
<style>
.loader {
  border: 16px solid #f3f3f3;
  border-radius: 50%;
  border-top: 16px solid #3498db;
  width: 120px;
  height: 120px;
  -webkit-animation: spin 2s linear infinite;
  animation: spin 2s linear infinite;
}

@-webkit-keyframes spin {
  0% { -webkit-transform: rotate(0deg); }
  100% { -webkit-transform: rotate(360deg); }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
</style>
<body>

<h1>Preload Images</h1>
<div class="loader"></div>


<script>
// http://www.javascriptkit.com/javatutors/preloadimagesplus.shtml
var newimages=[];
/*
function preloadimages(arr){
    
    var arr=(typeof arr!="object")? [arr] : arr //force arr parameter to always be an array
    for (var i=0; i<arr.length; i++){
        newimages[i]=new Image()
        newimages[i].src=arr[i]
    }
} */
function preloadimages(arr){
    var loadedimages=0;
    var arr=(typeof arr!="object")? [arr] : arr;
    function imageloadpost(){
        loadedimages++;
        if (loadedimages==arr.length){
			// use the .complete property to check if images were successfully loaded
			 for (var i = 0; i < newimages.length; i++) {
				var flag = false;
				( newimages[i].complete ) ? flag = true : flag = false;
				console.log(i + "flag" + flag);
			 }
        }
    }
    for (var i=0; i<arr.length; i++){
        newimages[i]=new Image();
        newimages[i].src=arr[i];
        newimages[i].onload=function(){
            imageloadpost();
        }
        newimages[i].onerror=function(){
			imageloadpost();
        }
    }
} 

preloadimages(['images/image1.png', 'images/image2.jpg', 'images/image3.png', 'images/image3.png']);
//.done(function(images){
 //code inside here is run after all images have preloaded
 //images parameter is an array of image objects corresponding to the preloaded images
 //images[0] references the 1st image etc
 console.log("Done");

//})
</script>

</body>
</html>
