<!DOCTYPE html>
<!--
Solution to exercise where the board toggles X's then O's then blanks.
Sam Scott, January 2014
-->
<html>
    <head>
        <title>Sliding Tile Puzzle</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width" />
        <link rel="stylesheet" href="css/tictactoe.css"/>

    </head>
    <body>
        <h1>Sliding Tile Puzzle</h1>
        <table>
            <tr>
                <td id="cell00"></td>
                <td id="cell01"></td>
                <td id="cell02"></td>
            </tr>
            <tr>
                <td id="cell10"></td>
                <td id="cell11"></td>
                <td id="cell12"></td>
            </tr>
            <tr>
                <td id="cell20"></td>
                <td id="cell21"></td>
                <td id="cell22"></td>
            </tr>
        </table>
        <p>
            <span id="message">Player X Go!</span> 
            <input type="button" value="reset game" onclick="toggle();">
        </p> 
        <script type="text/javascript">
            
            var state = -1;
            
            function toggle() {
                var symbol, color, background, message;
                state = (state + 1) % 3;
                switch (state) {
                    case 0:
                        symbol = "X";
                        color = "red";
                        background = "white";
                        message = "It's all Xs!";
                        break;
                    case 1:
                        symbol = "O";
                        color = "blue";
                        background = "white";
                        message = "It's all Os!";
                        break;
                    case 2:
                        symbol = "";
                        color = "white";
                        background = "black";
                        message = "????????????";
                        break;
                }
                //var cells = document.querySelectorAll("td");
					 var cells = document.getElementsByTagName("td");
					 //var tiles = [1,2,3,4,5,6,7,8,null];
					 var tiles = ["A","B","C","D","E","F","G","H",null];
					 console.log(tiles);
					 //var sorted = tiles.sort( function (a,b){return (Math.round(Math.random())-0.5)});
					 //console.log(sorted.indexOf(null));
                for (var i=0; i<cells.length; i++) {
                    cells[i].innerHTML = tiles[i];
						  cells[i].value = tiles[i];
                    cells[i].style.color = color;
                    cells[i].style.backgroundColor = background;
                }
                document.getElementById("message").innerHTML = message;
            }
				// on click, check if valid moves contain null
				// if yes, change clicked tile with the null tile
				// 00 01 	10   	1 [2,4]  valid moves
				// 01 00 02 11		2 [1,5,3]
				// 02 01    12		3 [2,6]
				// 10 00    11		4 [1,5,7]
				// 11					5 [2,4,6,8]
				// 12 				6 [3,5,9]
				// 20					7 [4,8]
				// 21					8 [5,7,9]
				// 22					9 [5,8]
				var validMoves = [[2,4],[1,5,3],[2,6],[1,5,7],[2,4,6,8],[3,5,9],[4,8],[5,7,9],[6,8]];
				console.log("validMoves " + validMoves);
				console.log("validMoves[0] " + validMoves[0]);
				console.log("validMoves[0].length " + validMoves[0].length);
				var tile = ["A","B","C","D","E","F","G","H",null];
				console.log("tile[validMoves[0][0]] " + tile[validMoves[0][0]]);
				console.log("tile[validMoves[0][1]] " + tile[validMoves[0][1]]);
				console.log("validMoves[5] " + validMoves[5]);
				console.log("validMoves[5].length " + validMoves[5].length);
				console.log("tile[validMoves[5][0]] " + tile[validMoves[5][0]]);
				console.log("tile[validMoves[5][1]] " + tile[validMoves[5][1]]);
				console.log("tile[validMoves[5][2]] " + tile[validMoves[5][2]]);
        </script>		  
    </body>
</html>
